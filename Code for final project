import datetime
from datetime import date

today = date.today()
print(today)
#prints 2022-11-20

import PyPDF2

# creating a pdf file object 
pdfFileObj = open("immrecord.pdf",'rb') 
    
# creating a pdf reader object 
pdfReader = PyPDF2.PdfFileReader(pdfFileObj) 
    
# printing number of pages in pdf file 
#print(pdfReader.numPages) 
    
# creating a page object 
pageObj = pdfReader.getPage(0) 
    
# extracting text from page 
text = pageObj.extractText()

#for line in text.splitlines()[8:-3]:
#    print(line)

DOBline = text.splitlines()[4]
print(DOBline)


￼
import tabula as tb
import pandas as pd
# Importing the os library
import os

# Inbuilt function to remove files


# file = "BUNN, KEITH CARMELL.pdf"
# table = tb.read_pdf(file, pages='all')
# csv_table = tb.convert_into(file,'pdf_convert8.csv',pages="all")


#  print(csv_table)


# csv34("immu.pdf")

# The code with run the CSV file if the age is met to be true

import PyPDF2
from datetime import date


def numOfDays(date1, date2):
    return (date2 - date1).days


def c:
    file = filename + ".pdf"

    pdfFileObject = open(file, 'rb')

    pdfReader = PyPDF2.PdfFileReader(pdfFileObject)

    pageObject = pdfReader.getPage(0)

    text = pageObject.extractText()

    month1 = []
    day1 = []
    year1 = []

    for line in text.splitlines()[4:5]:
        field = line.split("/")
        month1.append(field[0])
        day1.append(field[1])
        year1.append(field[2])

    month = []

    for i in month1:
        for x in i:
            if x in ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"]:
                month.append(x)

    day = []

    for i in day1:
        for x in i:
            if x in ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"]:
                day.append(x)
    year = []
    for i in year1:
        for x in i:
            if x in ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"]:
                year.append(x)

    year = year[0:4]
    monthstr = ""
    daystr = ""
    yearstr = ""
    for i in month:
        monthstr = monthstr + i
    for i in day:
        daystr = daystr + i
    for i in year:
        yearstr = yearstr + i

    intmonth = int(monthstr)
    intday = int(daystr)
    intyear = int(yearstr)

    date1 = date(intyear, intmonth, intday)
    date2 = today

    return date2
    day = numOfDays(date1, date2)

    user_age = int(day / 366)
    return user_age


def appropriate_age(file):
    user_age = age(file)
    if user_age >= 19:
        return True
    else:
        print("You need to be 19 and up to use this code: ")
        print("Come back in", 19 - user_age, "year(s).")
        return False



file = open("orlovskiy.csv","r")

vaccine_name=[]

vaccine_dose=[]

vaccine_date=[]

for line in file.readlines():
    field = line.split(",")
    vaccine_name.append(field[0])
    vaccine_dose.append(field[1])
    vaccine_date.append(field[2])

#print(vaccine_name)

position_flu=[]
index = -1
for item in vaccine_name:
    index +=1
    #print(item,index)
    if "flu" in item:
        position_flu.append(index)

max_flu = max(position_flu)

most_recent_flu_date = vaccine_date[max_flu]
#print(most_recent_flu_date)

flu_date_fields = most_recent_flu_date.split("/")

print(flu_date_fields)

new_int_list_flu =[]

for num in flu_date_fields:
    num = int(num)
    new_int_list_flu.append(num)

print(new_int_list_flu)

flu_year = new_int_list_flu[2]
flu_month = new_int_list_flu[0]
flu_day = new_int_list_flu[1]


flu_date = date(flu_year, flu_month, flu_day)

print(flu_date)

#Flu – 1 dose annually
if age(filename)>=19:
    if "flu" not in vaccine_name:
        print("get flu vaccine.")
    elif numOfDays(flu_date, today)>=365:
        print("get flu vaccine.")
    else:
        print("up to date on flu vax.")
else:
    print("Come back in", 19 - user_age, "year(s).")
    

#Tdap (tetanus) – 1 dose initially, then one every 10 years
if patient age>=19:
    if no Tdap doses:
        print("get tdap vaccine.")
    elif (todays date - date of most recent tdap given)>=(365*10):
        print("it has been 10 years since your last tdap dose, discuss with physician.")
    else:
        print("up to date on flu vax.")

#measles, mumps, rubella (MMR) (not dependent on time frame, just dependent on number of doses)
if patient YOB>=1957 or if patient age<65:
    if no MMR vaccine:
        print ("get MMR.")
    elif count of MMR doses==1:
        print("You are considered fully vaccinated with the MMR vaccine, but may need a second dose depending on your indication. Please consult with a physician.")
    elif count of MMR doses == 2 print("You are fully vaccinated against MMR.")


#Varicella (VAR) (not dependent on time frame, just dependent on number of doses)
if patient age<50:
    if no varicella doses:
        print ("Get varicella vaccine")
    elif num of varicella doses ==1:
        print ("Records indicate you currently have 1 dose of the varicella vaccine. To be considered fully vaccinated, you must have 2 doses. Please consult with physician.") 
    elif count of varicella doses == 2:
        print ("you are fully vaccinated against varicella.")
if patient age>=50:
    if no varicella doses or num doses ==1:
        print ("2 doses of this vaccine are recommended for adults over 50 who have additional risk factors or other indications. Please consult with your physician to see if you are eligible.") 

#Zoster recombinant (RZV) 
if patient age>=50 years(365*50):
    if no doses:
        print ("2 doses of RZV is recommended for adults 50 and older. Please consult with your physician.")
    elif doses ==1:
        print("1 more dose recommended to be fully vaccinated.")
    elif doses ==2:
        print("Up to date.")
	
if patient age<50:
    if no doses:
        print("This vaccine is recommended for adults under 50 if they have an immunocompromising condition. If you believe this may apply to you, please consult with your physician.")
        


#Human papillomavirus (HPV)
if 19<= patient age<27:
    if no doses:
        print ("It is recommended for adults in your age range to get 2-3 doses of the HPV vaccine. Please consult with physician.")
    elif num doses ==1 or doses == 2:
        print ("It is recommended for adults in your age range to get 2-3 doses of the HPV vaccine. If you have 2, you may need a 3rd. Please consult with your physician.")
    elif num doses ==3:
        print ("You are fully vaccinated against HPV.")

if 27<= patient age<=45:
    if no doses at all:
        print ("You may be eligible to get vaccinated against HPV, please consult with a physician.")
    elif num doses = 1 or num doses = 2:
        print ("You may be fully vaccinated against HPV, please consult with your physician to determine if any more vaccines are needed.")
    elif num doses = 3:
        print("You are fully vaccinated against HPV.")
        

#Pneumococcal (PCV15, PCV20, PPSV23)
if patient age>=65:
    if no doses at all:
        print("Adults 65 and up require two doses of the pneumococcal vaccine. Please consult with your physician.")
    if num of doses ==1:
        print ("Adults 65 and up require two doses of the pneumococcal vaccine. Please consult with your physician.")
    if num of doses ==2:
        print("You are fully vaccinated with the pneumococcal vaccine.")

if patient 19<=age<65:
    print("Adults between the ages of 19 and 64 may qualify to receive the pneumococcal vaccine based on medical conditions or other risk factors. Please consult with your doctor, and for more information visit linktocdcwebsite.")
    


#Hepatitis A (HepA)
if patient age>=19:
          if no doses or dose ==1:
              print("It is recommended that adults have at least 2 or 3 doses of  the HepA vaccine depending on the vaccine type. If you are 19 years or older, you may be eligible to receive this vaccine based on risk factors or other indiciations. Please consult with your physician.")

#Hepatitis B (HepB)
if 19<= patient age<60:
    if num doses == 1 or num doses == 2 or num doses ==3:
        print("The CDC recommends 2,3, or 4 doses of the HepB vaccine for adults under the age of 60 depending on vaccine or condition. Please consult with your physician to determine how many more doses you need to be considered fully vaccinated.")
    elif num doses == 4:
	print("You are fully vaccinated with the HepB vaccine.")

if patient age>=60:
    print("For adults over the age of 60, the CDC recommends the HepB vaccine for adults depending on the patient indication and the vaccine. Please consult with your physician to determine if you are eligible for the HepB vaccine and how many doses you need to be considered fully vaccinated.")
    

#Meningococcal A, C, W, Y (MenACWY)
if patient age>=19:
    if num doses == 2:
        print ("You are fully vaccinated with the MenACWY vaccine.")
    elif no doses or dose num ==1:
        print("For adults 19 and older, the  CDC recommends 1 or 2 doses depending on indication. Please consult with your physician to determine if you are eligible to receive the MenACWY vaccine.")

#Meningococcal B (MenB) 
if patient age>=19:
    if no doses present or num doses ==1 or num doses ==2: 
        print("For adults 19 and older, the  CDC recommends 2 or 3 doses depending on indication. Please consult with your physician to determine if you are eligible to receive the MenB vaccine.")
    elif num doses ==3:
	print("You are fully vaccinated with the MenB vaccine.")

#Haemophilus influenzae type b (Hib)
if patient age>=19:
    if no doses or num doses<3:
        print("For adults 19 and older, the  CDC recommends 1 or 3 doses depending on indication. Please consult with your physician to determine if you are eligible to receive the Hib vaccine and how many doses you need.")
    elif num doses == 3:
        print("You are fully vaccinated with the Hib vaccine.")

